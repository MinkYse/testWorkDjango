<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        .center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translateX(-50%) translateY(-50%);
        }
        h1 {
            font-size: 40px;
        }
        p, button {
            font-size: 25px;
        }
    </style>
</head>
  <body>
    <div class="center">
        <h1>Item {{ item.id }}</h1>
        <p>{{ item.description }}</p>
        <p>{{ item.get_display_price }}</p>
        <button id="buy-button">Buy item</button>
    </div>
    <script type="text/javascript">
      let stripe = Stripe('{{ stripe_public_key }}');
      let buyButton = document.getElementById('buy-button');
      buyButton.addEventListener('click', function() {
        fetch('{% url 'create-checkout-session' item.id %}', {method: 'GET'})
        .then(function (response) {
          return response.json();
        })
        .then(function (session) {
          return stripe.redirectToCheckout({ sessionId: session.id });
        })
        .then(function (result) {
          if (result.error) {
            alert(result.error.message);
          }
        })
        .catch(function (error) {
          console.error("Error:", error);
        });
      });
    </script>
</body>
</html>